(this.webpackJsonpanonymous_frontend=this.webpackJsonpanonymous_frontend||[]).push([[0],{35:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(28),s=n.n(a),c=(n(35),n(2)),o=n(4),u=n.n(o),l=n(10),i=n(7),p=n(12),b=n.n(p),x="/api/messages",d={getAll:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(x);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addUser:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/user",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addMessages:function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(x,"/").concat(n),t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),login:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUserData:function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(x,"/user/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=n(1),m=function(e){var t=e.history,n=Object(r.useState)(""),a=Object(i.a)(n,2),s=a[0],c=a[1],o=Object(r.useState)(""),p=Object(i.a)(o,2),b=p[0],x=p[1],m=Object(r.useState)(""),f=Object(i.a)(m,2),g=f[0],h=f[1],O=function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,d.login({username:s,password:b});case 4:r=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(r)),c(""),x(""),t.push("/messages"),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(1),h("invalid passwrod or username,pls try again"),c(""),x(""),setTimeout((function(){h("")}),3e3);case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"w-screen h-screen  bg-gray-600 flex flex-col justify-start items-center pt-20 text-2xl",children:[Object(j.jsx)("p",{children:g}),Object(j.jsx)("p",{className:"pb-3",children:"Login to Anonymous"}),Object(j.jsxs)("form",{className:"flex rounded-lg flex-col bg-gray-400 p-12",onSubmit:O,children:["username"," ",Object(j.jsx)("input",{className:"input-tag",type:"text",required:!0,value:s,onChange:function(e){return c(e.target.value)}}),Object(j.jsx)("br",{}),"password"," ",Object(j.jsx)("input",{className:"input-tag",type:"password",required:!0,value:b,onChange:function(e){return x(e.target.value)}}),Object(j.jsx)("button",{className:"mt-6 border-2 text-center border-white bg-purple-500 rounded-lg text-gray-800 w-40 ml-12",children:"login"})]}),Object(j.jsx)("button",{className:"mt-6 border-2 text-center border-white bg-purple-500 rounded-lg text-gray-800 w-50 p-1 ml-2",onClick:function(){t.push("/")},children:"Create Account?"})]})},f=function(e){var t=e.history,n=Object(r.useState)(""),a=Object(i.a)(n,2),s=a[0],c=a[1],o=Object(r.useState)(""),p=Object(i.a)(o,2),b=p[0],x=p[1],m=Object(r.useState)(""),f=Object(i.a)(m,2),g=f[0],h=f[1],O=function(){var e=Object(l.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={username:s,password:b},e.prev=2,e.next=5,d.addUser(r);case 5:console.log({history:t}),t.push("/login"),c(""),x(""),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),s&&b?(h("username not available,choose another username"),c(""),x("")):h("pls enter username or password"),setTimeout((function(){h("")}),3e3);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"bg-purple-500 w-screen h-screen flex flex-col  items-center  gap-y-5 text-2xl pt-4",children:[Object(j.jsx)("p",{className:"text-red-400",children:g}),Object(j.jsx)("h1",{className:"p-tag text-white text-3xl",children:"create account"}),Object(j.jsxs)("form",{className:"flex flex-col ",children:["username"," ",Object(j.jsx)("input",{className:"input-tag",type:"text",value:s,onChange:function(e){return c(e.target.value)},required:!0})," ",Object(j.jsx)("br",{}),"password"," ",Object(j.jsx)("input",{className:"input-tag",type:"text",value:b,onChange:function(e){return x(e.target.value)},required:!0})," ",Object(j.jsx)("br",{}),Object(j.jsx)("button",{className:" w-52 rounded-lg ml-6 border-white border-2 bg-purple-400 text-gray-600 outline-none",onClick:O,children:"create account"})]}),Object(j.jsx)("button",{className:"w-auto rounded-lg border-white border-2 bg-purple-400 text-gray-600 outline-none p-1",onClick:function(){return t.push("/login")},children:"Already have an account"})]})},g=function(e){var t=e.match,n=Object(r.useState)(""),a=Object(i.a)(n,2),s=a[0],c=a[1],o=Object(r.useState)(""),u=Object(i.a)(o,2),l=u[0],p=u[1],b=t.params.username;return Object(j.jsxs)("div",{className:"h-screen w-screen bg-gray-400 flex flex-col pt-20 text-2xl pl-20 overflow-hidden",children:[Object(j.jsx)("p",{className:"text-xl text-green-600",children:l}),Object(j.jsxs)("p",{className:"pb-2 text-purple-800",children:["messageBox for ",b]}),Object(j.jsx)("textarea",{className:"text-white bg-purple-600 w-96 max-h-44 outline-none text-base pl-2 border-2 border-gray-400 rounded-xl",value:s,onChange:function(e){return c(e.target.value)},cols:"50",rows:"15",placeholder:"write a message for ......."}),Object(j.jsx)("button",{className:"flex w-14 p-1 rounded-lg text-xl text-center mt-1 outline-none border-2 border-gray-500 bg-purple-600 ",onClick:function(){return function(e){s&&d.addMessages({message:s},e).then((function(){c(""),p("Anonymous message succesfully sent to ".concat(e)),setTimeout((function(){p("")}),3e3)})).catch((function(){c(""),p("invalid link"),setTimeout((function(){p("")}),3e3)}))}(b)},children:"send"})]})},h=n(13),O=function(e){var t=e.history,n=Object(r.useState)([]),a=Object(i.a)(n,2),s=a[0],c=a[1],o=window.localStorage.getItem("loggedUser"),u=JSON.parse(o).username;Object(r.useEffect)((function(){d.getUserData(u).then((function(e){c(e)})).catch((function(e){return console.log(e)}))}),[]);var l="/user/".concat(u);return Object(j.jsxs)("div",{className:"flex flex-col text-gray-600 bg-purple-300 text-2xl items-center w-screen h-screen pt-16 overflow-x-hidden",children:[Object(j.jsxs)("h2",{className:"",children:[u," logged in"]}),Object(j.jsxs)("div",{className:"mt-20 pl-10 flex justify-start items-start w-screen",children:["copy link to messageBox:",Object(j.jsxs)(h.b,{className:"text-purple-700",to:l,children:["http://localhost:3000/user/",u]})]}),Object(j.jsx)("p",{className:"mt-10 w-screen flex justify-start pl-10 ",children:"Your Messages:"}),Object(j.jsx)("br",{}),Object(j.jsx)("div",{className:"flex flex-col w-screen pl-20",children:0===s.length?"No messages for you yet lol":s.map((function(e,t){return Object(j.jsxs)("div",{className:" w-max flex flex-col justify-start mr-96  p-3 border-gray-600 border-2 bg-purple-500 m-3 text-gray-200 rounded-lg text-xl",children:[Object(j.jsx)("span",{className:"text-base",children:"Anonymous user says:"}),Object(j.jsx)("span",{className:"ml-20 mt-3",children:e.message})]},"p".concat(t))}))}),Object(j.jsx)("button",{className:"mt-36 mb-10  rounded-lg border-purple-500 border-2 bg-gray-400 text-gray-700 outline-non p-1",onClick:function(){window.localStorage.clear(),t.push("/login")},children:"Logout"})]})},v=function(){return Object(j.jsx)("div",{children:Object(j.jsxs)(c.c,{children:[Object(j.jsx)(c.a,{path:"/login",component:m}),Object(j.jsx)(c.a,{path:"/",exact:!0,component:f}),Object(j.jsx)(c.a,{path:"/messages",exact:!0,component:O}),Object(j.jsx)(c.a,{path:"/user/:username",exact:!0,component:g})]})})};s.a.render(Object(j.jsx)(h.a,{children:Object(j.jsx)(v,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.9d296f1d.chunk.js.map